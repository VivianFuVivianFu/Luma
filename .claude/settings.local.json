{
  "permissions": {
    "allow": [
      "Bash(npm run dev:*)",
      "Bash(npm run build:*)",
      "Bash(npm install:*)",
      "Bash(mkdir:*)",
      "Bash(npm run lint)",
      "Bash(npx tsc:*)",
      "Bash(git fsck:*)",
      "Bash(python:*)",
      "Bash(dir:*)",
      "Bash(curl:*)",
      "Bash(git checkout:*)",
      "Bash(cat:*)",
      "Bash(taskkill:*)",
      "Bash(node:*)",
      "Bash(copy:*)",
      "Bash(cp:*)",
      "Bash(grep:*)",
      "Bash(sed:*)",
      "Bash(echo:*)",
      "Bash(start http://localhost:5184)",
      "Bash(start http://localhost:5175)",
      "WebFetch(domain:www.npmjs.com)",
      "Bash(del test_elevenlabs.js)",
      "Bash(rm:*)",
      "WebFetch(domain:elevenlabs.io)",
      "Bash(start http://localhost:5173)",
      "Bash(powershell:*)",
      "Bash(git push:*)",
      "Bash(start http://localhost:5174)",
      "Bash(git add:*)",
      "WebSearch",
      "Bash(vercel:*)",
      "Bash(npx vercel:*)",
      "Bash(git config:*)",
      "Bash(del validate-env.js)",
      "Bash(del \"C:\\Users\\vivia\\OneDrive\\Desktop\\Luma 3\\validate-env.js\")",
      "Bash(npm run start:server:*)",
      "WebFetch(domain:huggingface.co)",
      "Bash(del debug-routes.js)",
      "Bash(supabase status:*)",
      "Bash(supabase init:*)",
      "Bash(npx supabase:*)",
      "Bash(psql:*)",
      "Bash(FROM_EMAIL=\"Luma <noreply@placeholder-domain.com>\" )",
      "Bash(HF_MODEL_ID=\"klyang/MentaLLaMA-chat-7B\" )",
      "Bash(./setup-nudge-system.bat)",
      "Bash(export TERM=xterm)",
      "Bash(export BROWSER=\"/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe\")",
      "Bash(export FORCE_COLOR=1)",
      "Bash(winpty npx supabase login)",
      "Bash(SUPABASE_ACCESS_TOKEN=sbp_1086cfd31b066daeac15848e3578b588f971a5d1 npx supabase projects list)",
      "Bash(SUPABASE_ACCESS_TOKEN=sbp_1086cfd31b066daeac15848e3578b588f971a5d1 npx supabase link --project-ref oyqzljunafjfuwdedjee --password skip)",
      "Bash(SUPABASE_ACCESS_TOKEN=sbp_1086cfd31b066daeac15848e3578b588f971a5d1 npx supabase secrets set --project-ref oyqzljunafjfuwdedjee SUPABASE_URL=\"https://oyqzljunafjfuwdedjee.supabase.co\" SUPABASE_SERVICE_ROLE_KEY=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im95cXpsanVuYWZqZnV3ZGVkamVlIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NDY1ODIwNiwiZXhwIjoyMDcwMjM0MjA2fQ.eUbnUfEeXJ7p7SCTBS3-MuUPglnR8ztIiqqsZgHruUg\" RESEND_API_KEY=\"re_fyNdBZxk_61v8KRBJ8aTUxJnNp92GBCSr\")",
      "Bash(SUPABASE_ACCESS_TOKEN=sbp_1086cfd31b066daeac15848e3578b588f971a5d1 npx supabase functions deploy nudge-email-24h --project-ref oyqzljunafjfuwdedjee --no-verify-jwt)",
      "Bash(VITE_SUPABASE_URL=https://oyqzljunafjfuwdedjee.supabase.co VITE_SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im95cXpsanVuYWZqZnV3ZGVkamVlIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NDY1ODIwNiwiZXhwIjoyMDcwMjM0MjA2fQ.eUbnUfEeXJ7p7SCTBS3-MuUPglnR8ztIiqqsZgHruUg node -e \"\nconst memory = require(''./src/multimodel/memory.supabase.js'');\n\nasync function testShortTermMemory() {\n  console.log(''=== 测试短期记忆功能 ==='');\n  const userId = ''test-user-'' + Date.now();\n  const sessionKey = ''test-session'';\n  \n  try {\n    // 1. 保存几轮对话\n    console.log(''1. 保存对话轮次...'');\n    await memory.saveTurn(userId, sessionKey, { role: ''user'', content: ''你好，我今天感觉很焦虑'' });\n    await memory.saveTurn(userId, sessionKey, { role: ''assistant'', content: ''我理解你的感受，能告诉我具体是什么让你感到焦虑吗？'' });\n    await memory.saveTurn(userId, sessionKey, { role: ''user'', content: ''工作压力很大，我担心明天的presentation'' });\n    await memory.saveTurn(userId, sessionKey, { role: ''assistant'', content: ''工作压力确实会让人焦虑。你可以试试深呼吸放松。'' });\n    \n    // 2. 加载上下文\n    console.log(''2. 加载会话上下文...'');\n    const context = await memory.loadContext(userId, sessionKey);\n    console.log(''会话UUID:'', context.sessionUUID);\n    console.log(''摘要:'', context.summary || ''(无摘要)'');\n    console.log(''长期记忆条数:'', context.longmem.length);\n    \n    // 3. 更新摘要\n    console.log(''3. 更新会话摘要...'');\n    await memory.updateSummary(userId, sessionKey);\n    \n    // 4. 再次加载验证\n    const updatedContext = await memory.loadContext(userId, sessionKey);\n    console.log(''更新后的摘要:'', updatedContext.summary);\n    \n    console.log(''✅ 短期记忆功能测试通过'');\n    return true;\n  } catch (error) {\n    console.error(''❌ 短期记忆测试失败:'', error.message);\n    return false;\n  }\n}\n\ntestShortTermMemory().then(success => {\n  process.exit(success ? 0 : 1);\n});\n\")",
      "Bash(timeout:*)",
      "Bash(find:*)",
      "Bash(npm run env:check:*)",
      "Bash(npx vite:*)",
      "Bash(git commit:*)",
      "Bash(git rm:*)",
      "Bash(git rev-parse:*)",
      "Bash(mv:*)",
      "Bash(del:*)",
      "Bash(npm run qa:suggest:*)",
      "Bash(API_BASE=http://localhost:8787 npm run qa:eval)",
      "Bash(npm run qa:eval:*)",
      "Bash(start http://localhost:5174/test-proxy-connection.html)",
      "Bash(export FORCE_KILL=true)"
    ],
    "deny": [],
    "defaultMode": "acceptEdits"
  }
}